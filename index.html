<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Webchat is a FREE messaging website. Send & receive messages with your contacts.">
  <meta name="keywords" content="Webchat, texting, chatting website, web application, wechat, bcf01, ">
  <meta name="author" content="John Doe">
  <link rel="icon" href="logoImg.png" sizes="144x144">
  <title>Webchat</title>
  <link defer rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.gstatic.com" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp" rel="stylesheet">
    <script defer src="auth.js"></script>
  <script defer src="app.js"></script>
  <script defer src="languages.js"></script>
  <!-- propeller ads -->
  <meta defer name="propeller" content="d9988f93441d9fbe6e80eba54f42d6ee">
  <!-- media.net -->
  <script type="text/javascript">
    window._mNHandle = window._mNHandle || {};
    window._mNHandle.queue = window._mNHandle.queue || [];
    medianet_versionId = "3121199";
</script>
<script src="https://contextual.media.net/dmedianet.js?cid=8CUGK6FR7" async="async"></script>
<!-- adsense -->
  <script defer async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6203740015512387" crossorigin="anonymous"></script>
</head>

<body>

  <div class="loginScreen">
  
    <div class="lang-selector">
      <select class="selectpicker">
        <option class="langchange" data-key="french" value="fr">French</option>
        <option class="langchange" data-key="english" value="en">English</option>
        <option class="langchange" data-key="spanish" value="es">Spanish</option>
      </select>
    </div>

    <div class="loginFormWrapper">
      <h1 class="langchange" data-key="login-form-title" >Se connecter</h1>
      <form class="loginForm">
        <div class="loginEmailDiv">
          <label for="loginEmail" class="langchange" data-key="login-email">Entrez votre adresse email</label>
          <input type="email" name="loginEmail" id="loginEmail" autocapitalize="none" autocomplete="auto"
            autocorrect="off" spellcheck="false" placeholder="" required />
        </div>
        <br />
        <div class="loginPasswordDiv">
          <label for="loginPassword" class="langchange" data-key="login-pw">Entrez votre mot de passe</label>
          <input type="password" name="loginPassword" id="loginPassword" autocapitalize="none" autocomplete="off"
            autocorrect="off" spellcheck="false" required />
        </div>
        <p class="login-error"></p>
        <button id="loginSubmit" type="submit">
          <img src="Ellipsis-1s-50px.svg" alt="loading..." srcset="" style="display: none" height="30px" />
          <p style="margin: 0" class="langchange" data-key="login-submit-btn">Se connecter</p>
        </button>
      </form>
      <!-- <div class="orWrapper"><div class="orLine"></div><p class="orP">OR</p><div class="orLine"></div></div> -->
      <hr />
      <div class="otherSignInMethods">
        <button id="createAccountButton" class="langchange" data-key="nav-signup-form-btn">Inscrivez-vous</button>
      </div>
    </div>
    <div class="signUpFormWrapper">
      <h1 class="langchange" data-key="signup-form-title">Créer un nouveau compte</h1>
      <form class="signUpForm">
        <div class="signUpEmailDiv">
          <label for="signUpEmail" class="langchange" data-key="signup-email">Entrez votre adresse email</label>
          <input type="email" name="signUpEmail" id="signUpEmail" autocapitalize="none" autocomplete="auto"
            autocorrect="off" spellcheck="false" placeholder="" required />
        </div>
        <div class="signUpNameDiv">
          <label for="signUpName" class="langchange" data-key="signup-username">Créez un nom d'utilisateur</label>
          <input type="text" name="signUpName" id="signUpName" autocapitalize="off" autocomplete="off"
            autocorrect="off" spellcheck="false" placeholder="" required>
        </div>
        <div class="signUpPasswordDiv">
          <label for="signUpPassword" class="langchange" data-key="signup-pw">Créez un mot de passe</label>
          <input type="password" name="signUpPassword" id="signUpPassword" autocapitalize="none" autocomplete="off"
            autocorrect="off" spellcheck="false" required />
        </div>
        <div class="signUpPasswordDiv secondPassword">
          <label for="signUpPasswordC" class="langchange" data-key="signup-pw-conf">Confirmer le mot de passe</label>
          <input type="password" name="signUpPasswordC" id="signUpPasswordC" autocapitalize="none" autocomplete="off"
            autocorrect="off" spellcheck="false" required />
        </div>
        <input type="checkbox" id="agreementCheckbox" name="agreement" required>
        <label class="agreementLabel langchange" for="agreement" data-key="signup-terms">J'accepte les <a href="#terms&conditions">Termes et Conditions</a> et la <a target="_blank" href="privacy.html">Politique de Confidentialité</a></label>
        <p class="signUp-error"></p>
        <button id="signUpSubmit" type="submit">
          <img src="Ellipsis-1s-50px.svg" alt="loading..." srcset="" style="display: none" height="30px" />
          <p class="langchange" data-key="signup-submit-btn">Créer le compte</p>
        </button>
      </form>
      <hr />
      <div class="otherOptionsLogin">
        <button id="loginToAccountButton" class="langchange" data-key="nav-login-btn">Connectez-vous</button>
      </div>
    </div>
  </div>
  <div class="introScreen">
  
    <div class="lang-selector">
      <select class="selectpicker">
        <option class="langchange" data-key="french" value="fr">French</option>
        <option class="langchange" data-key="english" value="en">English</option>
        <option class="langchange" data-key="spanish" value="es">Spanish</option>
      </select>
    </div>

    <div class="introtextWrapper">
      <img class="titleImg" src="Logo.svg" alt="">
      <button id="nextButton">
        <p class="langchange" data-key="initial-start-btn" style="display: none">Commencer</p>
        <img src="Ellipsis-1s-50px.svg" alt="loading..." srcset="" />
      </button>
    </div>
  </div>

  <!-- main page content -->
  <main>
    <div class="convoNlistWrapper">
      <div class="lang-selector">
        <select class="selectpicker">
          <option class="langchange" data-key="french"  value="fr">French</option>
          <option class="langchange" data-key="english" value="en">English</option>
          <option class="langchange" data-key="spanish" value="es">Spanish</option>
        </select>
      </div>
      <div class="contact-list">
        <div id="navBar">
          <div id="searchBarWrapper">
            <input class="langchange" data-key="search-user-input" placeholder="Recherchez des utilisateurs" id="searchInput" type="text" autocapitalize="none"
              autocomplete="off" autocorrect="off" spellcheck="false" />
              <button id="closeSearch">
                <span class="material-icons-round">
                  close
                </span>
              </button>
            <button id="searchButton">
              <span class="material-icons-round searchIcon">
                search
              </span>
            </button>
          </div>

          <div id="profilePicWrapper" class="profile">
            <img
              src=""
              alt="" srcset="">
          </div>
        </div>

        <div class="contacts" id="app">

          <div v-if="contactUsersArray.length == 0 && searchUsersArray.length == 0" class="noFriendsWarning"><p class="langchange" data-key="nofriends-indicator-msg">Utilisez la barre de recherche pour ajouter des amis</p></div>
          <img class='loadingCircle' src='Rolling-1s-200px.svg'/>
          <div class='searchError'><span class='material-icons-round'>error_outline</span><p class="langchange" data-key="nosearchresults-error-msg">Aucun résultat</p></div>

          <!-- <div class="active-contacts-wrapper">
            <div class="active-contact">
              <div class="outer-wrapper">
              <div class="contact-circle">
                <img src="https://a.ltrbxd.com/avatar/twitter/4/3/8/3/8/2/shard/http___pbs.twimg.com_profile_images_959679433505497089__0ShmWMC.jpg?k=cd3effc45f" alt="">
              </div>
              <div class="active-signal"></div>
            </div>
              <p class="contact-username" >Benjamin</p>
            </div>
          </div> -->

              <!-- advertisement -->
              <!-- ADSENSE -->
              <!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6203740015512387"
                    crossorigin="anonymous"></script>
              <ins class="adsbygoogle"
                    style="display:block"
                    data-ad-format="fluid"
                    data-ad-layout-key="-gi-1j-26+3k+c6"
                    data-ad-client="ca-pub-6203740015512387"
                    data-ad-slot="8470510635"></ins>
              <script>
                    (adsbygoogle = window.adsbygoogle || []).push({});
              </script> -->

              <!-- MEDIA.NET -->
              <!-- <div id="227365786">
                <script type="text/javascript">
                    try {
                        window._mNHandle.queue.push(function (){
                            window._mNDetails.loadTag("227365786", "728x90", "227365786");
                        });
                    }
                    catch (error) {}
                </script>
              </div> -->

              <!-- propeller ads -->

          <!-- searched USER div -->
          <div v-for="searchUsersArray in searchUsersArray" class='friend searchedFriend' tabindex=0>
            <div class='profile'><img :src="searchUsersArray.photoURL" alt='' srcset='' /></div>
            <div class='conversation-info'>
              <p class='email'>{{ searchUsersArray.email }}</p>
              <p class='username'>{{ searchUsersArray.displayName }}</p>
              <p class='creation-date'>joined on {{searchUsersArray.metadata.creationTime}}</p>
            </div>
            <div class="moreDiv">
            <button v-if="app.contactUsersArray.filter(e => e.uid == searchUsersArray.uid).length == 0" v-on:click="addToContacts(searchUsersArray.uid, searchUsersArray.displayName, $event, searchUsersArray)">
              <span class="material-icons-round">person_add_alt_1</span>
              <img class='loadingCircle' src='Rolling-1s-200px.svg'/>
            </button>
            <button class="removeContact" v-else v-on:click="removeFromContacts(searchUsersArray.uid, searchUsersArray.displayName, $event, searchUsersArray)">
              <span class="material-icons-round">person_off</span>
              <img class='loadingCircle' src='Rolling-1s-200px.svg'/>
              </button>
            </div>
          </div>

          <!-- contact USER div -->
          <div v-on:click="openConversation(contactUsersArray, $event)" v-bind:style="{ display: currentDisplayStatus }" v-bind:class="{ 'show': conversationWrapper.currentConversationInfo.uid == contactUsersArray.uid }" v-for="contactUsersArray in contactUsersArray" class="friend contactFriend">
            <div class="profile">
              <img :src="contactUsersArray.photoURL" alt="" srcset="" /></div>
            <div class="conversation-info">
              <!-- <p class='email'>{{ contactUsersArray.email }}</p> -->
              <p class="username">{{ contactUsersArray.displayName }}</p>
              <!-- <p class="conversation-preview">{{ messagePreview( contactUsersArray.displayName, contactUsersArray.previewMessage) }}</p> -->
            </div>
            <button class="openMoreButton" v-on:click="toggleButton($event)" v-on:blur="closetoggleButtons($event)"><span class="material-icons-round">chevron_left</span></button>
            <div class="moreDiv">
              <button class="removeContact" v-on:click="removeFromContacts(contactUsersArray.uid, contactUsersArray.displayName, $event, contactUsersArray)">
                <span class="material-icons-round">person_off</span>
                <img class='loadingCircle' src='Rolling-1s-200px.svg'/>
                </button>
              </div>
              <div class="newMessageNotif"></div>
          </div>

        </div>
      </div>
      <div class="conversationWrapper" id="conversationWrapper">
        <div class="conversation-header">

          <div class="profile">
            <img :src="currentConversationInfo.photoURL" alt=""
              srcset="" />
          </div>

          <div class="username-info">
            <span>{{ currentConversationInfo.displayName }}</span>
          </div>
          
        </div>

        <div class="conversation">
          
          <div v-for="pendingMessages in pendingMessages" class="message-inner-wrapper pendingMessage">
            <div class="outgoing-message-content">
              <span>{{ pendingMessages.text }}</span>
            </div>
          </div>

          <div v-for="currentConversation in currentConversation" class="message-inner-wrapper">
            <div class="message-spacer" v-if="checkTimestamp(currentConversation) >= 60000 && checkTimestamp(currentConversation) < 9000000"></div>
            <div class="time-stamp" v-if="checkTimestamp(currentConversation) >= 9000000"><span>{{ getTimestamp(currentConversation) }}</span></div>
                <!-- <div class="conversationAd" v-if="checkConversationAds(currentConversation)" >
                    <p>ADVERTISEMENT</p>
                  <div class="ad">
                    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6203740015512387"
                          crossorigin="anonymous"></script>
                    <ins class="adsbygoogle"
                          style="display:block; text-align:center;"
                          data-ad-layout="in-article"
                          data-ad-format="fluid"
                          data-ad-client="ca-pub-6203740015512387"
                          data-ad-slot="8197277961"></ins>
                    <script>
                          (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                  </div>
                </div> -->
            <div class="incoming-message-content" v-bind:style="[{ 'border-radius': styleMessage(currentConversation)[0]}, currentConversation.pendingMessage ? {'background-color': 'gray'} : {'background-color': ''}]"  v-bind:class="{ 'outgoing-message-content' : currentConversation.sentBy === auth.currentUser.uid}">
              <span>{{ currentConversation.text }}</span>
              <div class="timestampDiv"><p>{{ currentConversation.createdAt.toLocaleString(activeLang, { day: options.day , month: options.month })+ " " + currentConversation.createdAt.toLocaleTimeString(activeLang, { hour: 'numeric', minute: 'numeric' }) }}</p></div>
            </div>
          </div>



          <img class='loadingCircle' src='Rolling-1s-200px.svg'/>
          <div class="social-credit-score"><img src="" alt=""></div>
        </div>

        <button class="scrollDownConvoButton"><span class="material-icons-round">expand_more</span></button>
        <div class="inputArea">
          <form class="sendMessageForm" action="">
            <textarea data-key="msg-textarea" maxlength="800" rows="1" class="chatInput langchange" autocomplete="off" autocorrect="off" spellcheck="true"
              aria-expanded="false" aria-autocomplete="list" aria-multiline="true" aria-label="Message" dir="auto"
              contenteditable="true" role="textbox" placeholder="Tapez quelque chose..."></textarea>
            <button class="sendMessageButton" type="submit">
              <svg class="crt8y2ji" width="24px" height="24px" viewBox="0 0 24 24">
                <path
                  d="M16.6915026,12.4744748 L3.50612381,13.2599618 C3.19218622,13.2599618 3.03521743,13.4170592 3.03521743,13.5741566 L1.15159189,20.0151496 C0.8376543,20.8006365 0.99,21.89 1.77946707,22.52 C2.41,22.99 3.50612381,23.1 4.13399899,22.8429026 L21.714504,14.0454487 C22.6563168,13.5741566 23.1272231,12.6315722 22.9702544,11.6889879 C22.8132856,11.0605983 22.3423792,10.4322088 21.714504,10.118014 L4.13399899,1.16346272 C3.34915502,0.9 2.40734225,1.00636533 1.77946707,1.4776575 C0.994623095,2.10604706 0.8376543,3.0486314 1.15159189,3.99121575 L3.03521743,10.4322088 C3.03521743,10.5893061 3.34915502,10.7464035 3.50612381,10.7464035 L16.6915026,11.5318905 C16.6915026,11.5318905 17.1624089,11.5318905 17.1624089,12.0031827 C17.1624089,12.4744748 16.6915026,12.4744748 16.6915026,12.4744748 Z"
                  fill="rgb(55, 125, 230)" fill-rule="evenodd" stroke="none"></path>
              </svg>
            </button>
          </form>
        </div>
      </div>
    </div>
    <div class="error-popup">
      <img class="wifi-icon" src="signal_wifi_statusbar_connected_no_internet_4_black_24dp.svg" alt="wifi" srcset="" />
      <span class="error-text">Aucune connection internet</span>
    </div>
  </main>

  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/8.5.0/firebase-app.js"></script>

  <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
  <script src="https://www.gstatic.com/firebasejs/8.5.0/firebase-analytics.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-functions.js"></script>

    <!-- vue js -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>

    <!-- infolinks -->
    <!-- <script type="text/javascript"> var infolinks_pid = 3361186; var infolinks_wsid = 0; </script> <script type="text/javascript" src="//resources.infolinks.com/js/infolinks_main.js"></script> -->
</body>

</html>